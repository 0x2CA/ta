# 空间与坐标变换

## 坐标空间：

### 局部空间/模型空间

> 物体自身坐标系

- ![1619022091237](05-%E9%A1%B6%E7%82%B9%E5%8F%98%E6%8D%A2.assets/1619022091237.png)

#### [世界变换](https://ke.qq.com/webcourse/index.html#course_id=3135212&term_id=103259263&taid=10433300198840044&type=1024&vid=5285890809037839909)

> 将模型从其自身坐标转换到游戏世界坐标

### 世界空间：游戏世界的统一坐标系

- ![1619022106701](05-%E9%A1%B6%E7%82%B9%E5%8F%98%E6%8D%A2.assets/1619022106701.png)

#### [视图变换](https://ke.qq.com/webcourse/index.html#course_id=3135212&term_id=103259263&taid=10433308788774636&type=1024&vid=5285890809037839882)

> 将游戏世界中的景物转换到摄像机视角进行观察

### 视图空间/摄像机空间

> 以摄像机位置为原点，摄像机朝向为轴向的坐标系

- ![1619022123894](05-%E9%A1%B6%E7%82%B9%E5%8F%98%E6%8D%A2.assets/1619022123894.png)

#### [投影变换](https://ke.qq.com/webcourse/index.html#course_id=3135212&term_id=103259263&taid=10433308788774636&type=1024&vid=5285890809037839882)

>  将物体变换到裁剪空间

### [裁剪空间](https://ke.qq.com/webcourse/index.html#course_id=3135212&term_id=103259263&taid=10433308788774636&type=1024&vid=5285890809037839882)：

#### 平行投影：

- ![平行投影](05-%E9%A1%B6%E7%82%B9%E5%8F%98%E6%8D%A2.assets/1619022318333.png)

#### 透视投影

>  顶点的w值记录了顶点靠摄像机的远近距离，经过透视除法会变换到NDC空间

- ![透视投影](05-%E9%A1%B6%E7%82%B9%E5%8F%98%E6%8D%A2.assets/1619022381956.png)

#### 投影变换

> 在本空间下，经过==透视坐标除法/齐次坐标除法==（x/w, y/w, z/w）的点如果在NDC空间坐标范围内，则会被渲染，否则丢弃

### [NDC空间/投影空间](https://ke.qq.com/webcourse/index.html#course_id=3135212&term_id=103259263&taid=10433308788774636&type=1024&vid=5285890809037839882)

- ![1619022681302](05-%E9%A1%B6%E7%82%B9%E5%8F%98%E6%8D%A2.assets/1619022681302.png)
- OpenGL为单位立方体空间（x∈[-1,1], y∈[-1,1], z∈[-1,1]）
- DirectX为半立方体空间（x∈[-1,1], y∈[-1,1], z∈[0,1]）

#### 屏幕变换

> 将NDC空间下的点投影到屏幕像素坐标范围内

### [屏幕空间](https://ke.qq.com/webcourse/index.html#course_id=3135212&term_id=103259263&taid=10433308788774636&type=1024&vid=5285890809037839882)：

- ![1619022712511](05-%E9%A1%B6%E7%82%B9%E5%8F%98%E6%8D%A2.assets/1619022712511.png)

#### 屏幕像素坐标空间

>  可见顶点的坐标范围介于(0,0)~(Screen.width,Screen.height)

#### 屏幕归一化坐标空间

>  可见顶点的坐标范围介于(0,0)~(1,1)

## 视频参考：

- [矩阵在3D游戏中的运用](https://ke.qq.com/webcourse/index.html#course_id=3135212&term_id=103259263&taid=10433300198840044&type=1024&vid=5285890809037839909)